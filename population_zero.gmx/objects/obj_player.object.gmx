<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>sp_player_unarmed</spriteName>
  <solid>-1</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Stanovy pro objekt player

anim = 1/6; 
walk_speed = 1.7;
run_speed = 3;


// Alarmy
alarm[0] = 0;







</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// ...
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>// Pohyb do 8 sm�r� stejnou rychlost�
//kl�vesy pohybu
key_right=keyboard_check(ord("D"));
key_left=-keyboard_check(ord("A"));
key_down=keyboard_check(ord("S"));
key_up=-keyboard_check(ord("W"));

//pou�it� kl�ves
hor=key_left+key_right;
vert=key_up+key_down;
vsp=vert*walk_speed;
hsp=hor*walk_speed;
    
//L.shift sprint !L.shift walk
if hor != 0 or vert != 0
{
    if keyboard_check(vk_shift) &amp;&amp; global.endurance &gt; 0
    {
        dir = point_direction(0, 0, hor, vert);
        hsp = lengthdir_x(run_speed, dir);
        vsp = lengthdir_y(run_speed, dir);  
        global.endurance -=0.05
    }
    else
    {
        dir = point_direction(0, 0, hor, vert);
        hsp = lengthdir_x(walk_speed, dir);
        vsp = lengthdir_y(walk_speed, dir);
    }


   
    //horizont�ln� kolize s wall
    if place_meeting(x+hsp+sign(hsp),y,obj_wall_stone) 
    {
        while (!place_meeting(x+sign(hsp),y,obj_wall_stone))
        {
            x+=sign(hsp);
        }
    hsp=0
    }
    x += hsp;
    
    //vertik�ln� kolize s wall
    if place_meeting(x,y+vsp,obj_wall_stone)
    {
        while (!place_meeting(x,y+sign(vsp),obj_wall_stone))
        {
            y+=sign(vsp);
        }
    vsp=0;  
    }
    y += vsp;
}

if hor = 0 &amp;&amp; vert = 0
    {
        image_index = 0;
    }
    else 
        {
            image_speed = anim;
        }


// Smrt hr��e
if global.hp &lt;= 0
{
    instance_change(obj_player_dead, 0)
    instance_create(x, y-64, obj_restart)
}


// Dob�jen� n�boj� ze zdvyhnut�ch weaponek
if place_meeting(x,y,obj_gun) &amp;&amp; global.gunclip &lt; 14
{
    global.gunclip += 7
}
  
if global.gunclip &gt; 14
{
    global.gunclip = 14
}


if place_meeting(x,y,obj_rifle) &amp;&amp; global.rifleclip &lt; 200
{
    global.rifleclip += 40
}
  
if global.rifleclip &gt; 200
{
    global.rifleclip = 200
    
}


if place_meeting(x, y, obj_shotgun) &amp;&amp; global.shotgunammo &lt; 36
{
    global.shotgunammo += 6
}

if global.shotgunammo &gt; 36
{
    global.shotgunammo = 36
}



</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>// St�elba / �dery / seky
shooting_dir = point_direction (x, y, mouse_x, mouse_y);

if instance_exists(obj_player_knife) &amp;&amp; mouse_check_button_pressed(mb_left) &amp;&amp; alarm[0] &lt;= 0 
    {
      with (instance_create (x, y, obj_hitbox_knife))  
        {
            //sound_play(snd_gun)
            direction = other.shooting_dir;
        }
        alarm[0] = 0.3 * room_speed;
    }

if instance_exists(obj_player_gun) &amp;&amp; mouse_check_button_pressed(mb_left) &amp;&amp; alarm[0] &lt;= 0 &amp;&amp; global.gunclip &gt; 0
    {
      with (instance_create (x, y, obj_bullet_gun))  
        {
            sound_play(snd_gun)
            speed = 30;
            direction = other.shooting_dir;
        }
        alarm[0] = 0.3 * room_speed;
    }

if instance_exists(obj_player_rifle) &amp;&amp; mouse_check_button(mb_left) &amp;&amp; alarm[0] &lt;= 0 &amp;&amp; global.rifleclip &gt; 0
    {
      with (instance_create (x, y, obj_bullet_rifle))  
        {
            sound_play(snd_rifle)
            speed = 10;
            direction = other.shooting_dir;
        }
        alarm[0] = 0.1 * room_speed;
    }

if instance_exists(obj_player_shotgun) &amp;&amp; mouse_check_button_pressed(mb_left) &amp;&amp; alarm[0] &lt;= 0 &amp;&amp; global.shotgunammo &gt;= 0 &amp;&amp; global.shotgunclip &gt; 0
    {
        with instance_create (x, y, obj_bullet_shotgun)
        with instance_create (x, y, obj_bullet_shotgun)
        with instance_create (x, y, obj_bullet_shotgun)
        with instance_create (x, y, obj_bullet_shotgun)
        with instance_create (x, y, obj_bullet_shotgun)
        with instance_create (x, y, obj_bullet_shotgun)
        with instance_create (x, y, obj_bullet_shotgun)
        with instance_create (x, y, obj_bullet_shotgun)
        with instance_create (x, y, obj_bullet_shotgun)
        with instance_create (x, y, obj_bullet_shotgun)
        with instance_create (x, y, obj_bullet_shotgun)
        with instance_create (x, y, obj_bullet_shotgun)
        with instance_create (x, y, obj_bullet_shotgun)
        with instance_create (x, y, obj_bullet_shotgun) 
        with instance_create (x, y, obj_bullet_shotgun)  
        {
            sound_play(snd_shotgun)
            
        }
        alarm[0] = 1 * room_speed;
    }

// Kurzor unarmed
if instance_exists(obj_player)
    {
        cursor_sprite = sp_aim_unarmed;
    }  
    
// Kurzor gun
if instance_exists(obj_player_gun)
    {
        cursor_sprite = sp_aim_gun;
    }   
    
// Kurzor rifle
if instance_exists(obj_player_rifle)
    {
        cursor_sprite = sp_aim_rifle;
    }  
    
// Kurzor shotgun
if instance_exists(obj_player_shotgun)
    {
        cursor_sprite = sp_aim_shotgun;
    }  
     
// Sebr�n� zbran�
if place_meeting (x, y, obj_knife)
    {
        instance_change (obj_player_knife, 1);
    }
if place_meeting (x, y, obj_gun)
    {
        instance_change (obj_player_gun, 1);
    }

if (place_meeting (x, y, obj_rifle))
    {
        instance_change (obj_player_rifle, 1);
    }

if (place_meeting (x, y, obj_shotgun))
    {
        instance_change (obj_player_shotgun, 1);
    }
    
// Pr�zdn� z�sobn�k
if mouse_check_button_pressed(mb_left) &amp;&amp; global.gunclip = 0 &amp;&amp; instance_exists(obj_player_gun)
    {
        sound_play(snd_empty_clip);
    }

if mouse_check_button(mb_left) &amp;&amp; global.rifleclip = 0 &amp;&amp; instance_exists(obj_player_rifle)
    {
        sound_play(snd_empty_clip);
    }

if mouse_check_button_pressed(mb_left) &amp;&amp; global.shotgunclip = 0 &amp;&amp; global.shotgunammo = 0 &amp;&amp; instance_exists(obj_player_rifle)
    {
        sound_play(snd_empty_clip);
    }  
    

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>draw_sprite_ext(sp_player_unarmed,image_index,x,y,1,1,point_direction(x,y,mouse_x,mouse_y),c_white,1);
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
